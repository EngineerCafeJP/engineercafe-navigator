# ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

## æ¦‚è¦

Engineer Cafe Navigatorã¯ã€12ã®AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã‚ˆã‚‹åˆ†æ•£å‹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ç‰¹å®šã®è²¬å‹™ã‚’æŒã¡ã€RouterAgentã«ã‚ˆã£ã¦é©åˆ‡ãªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã‚¯ã‚¨ãƒªãŒãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã•ã‚Œã¾ã™ã€‚

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³

```
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚   User      â”‚
                              â”‚   Query     â”‚
                              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                              â”‚   Router    â”‚
                              â”‚   Agent     â”‚
                              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                          â”‚                          â”‚
    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Business  â”‚            â”‚   Facility    â”‚          â”‚    Event      â”‚
    â”‚ Info      â”‚            â”‚   Agent       â”‚          â”‚    Agent      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                          â”‚                          â”‚
    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Memory   â”‚            â”‚ Clarification â”‚          â”‚   General     â”‚
    â”‚  Agent    â”‚            â”‚    Agent      â”‚          â”‚  Knowledge    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                          â”‚                          â”‚
    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Voice    â”‚            â”‚  Character    â”‚          â”‚    Slide      â”‚
    â”‚  Agent    â”‚            â”‚  Control      â”‚          â”‚    Agent      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                          â”‚
    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  OCR      â”‚            â”‚   Language    â”‚
    â”‚  Agent    â”‚            â”‚  Classifier   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä¸€è¦§

### ã‚³ã‚¢ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ

| ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ | è²¬å‹™ | æ‹…å½“è€… |
|-------------|------|--------|
| **RouterAgent** | ã‚¯ã‚¨ãƒªãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚° | ãƒ†ãƒªã‚¹ã‚±, YukitoLyn |
| **BusinessInfoAgent** | å–¶æ¥­æ™‚é–“ãƒ»æ–™é‡‘ãƒ»å ´æ‰€ | ãƒ†ãƒªã‚¹ã‚± |
| **FacilityAgent** | è¨­å‚™ãƒ»åœ°ä¸‹æ–½è¨­ãƒ»Wi-Fi | Natsumi, ã‘ã„ã¦ãƒãƒ¼ |
| **EventAgent** | ã‚¤ãƒ™ãƒ³ãƒˆãƒ»ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ | ãƒ†ãƒªã‚¹ã‚± |
| **MemoryAgent** | ä¼šè©±å±¥æ­´ãƒ»ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ | takegg0311, YukitoLyn, Natsumi, Jun |

### ã‚µãƒãƒ¼ãƒˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ

| ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ | è²¬å‹™ | æ‹…å½“è€… |
|-------------|------|--------|
| **ClarificationAgent** | æ›–æ˜§ã•è§£æ¶ˆ | Chie, Jun |
| **LanguageClassifier** | è¨€èªæ¤œå‡º | Chie, Jun |
| **GeneralKnowledgeAgent** | ä¸€èˆ¬ã‚¯ã‚¨ãƒª | ãƒ†ãƒªã‚¹ã‚± |

### ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ

| ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ | è²¬å‹™ | æ‹…å½“è€… |
|-------------|------|--------|
| **CharacterControlAgent** | 3Dã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼åˆ¶å¾¡ | takegg0311, YukitoLyn |
| **VoiceAgent** | STT/TTSå‡¦ç† | Chie, ãŸã‘ãŒã‚ |
| **SlideAgent** | ã‚¹ãƒ©ã‚¤ãƒ‰ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ | ãƒ†ãƒªã‚¹ã‚± |
| **OCRAgent** | ç”»åƒ/æ–‡å­—èªè­˜ï¼ˆæ–°æ©Ÿèƒ½ï¼‰ | ã‘ã„ã¦ãƒãƒ¼, ãŸã‘ãŒã‚ |

## ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯

RouterAgentã¯ä»¥ä¸‹ã®å„ªå…ˆé †ä½ã§ã‚¯ã‚¨ãƒªã‚’ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã—ã¾ã™:

### å„ªå…ˆé †ä½

1. **ãƒ¡ãƒ¢ãƒªé–¢é€£** â†’ MemoryAgent
   - ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: "ã•ã£ã", "å‰ã«", "è¦šãˆã¦", "è¨˜æ†¶"

2. **ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆä¾å­˜** â†’ å‰å›ã®requestTypeã‚’ç¶™æ‰¿
   - ãƒ‘ã‚¿ãƒ¼ãƒ³: "åœŸæ›œæ—¥ã‚‚åŒã˜ï¼Ÿ", "ãã‚Œã¯ï¼Ÿ"

3. **æ˜ç¢ºåŒ–ãŒå¿…è¦** â†’ ClarificationAgent
   - æ›–æ˜§ãªã‚¯ã‚¨ãƒª: "ã‚«ãƒ•ã‚§ã«ã¤ã„ã¦"ï¼ˆEngineer Cafe? Saino?ï¼‰

4. **ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚¿ã‚¤ãƒ—ãƒ™ãƒ¼ã‚¹** â†’ å°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
   - hours/price/location â†’ BusinessInfoAgent
   - facility/basement â†’ FacilityAgent
   - event â†’ EventAgent

5. **ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯** â†’ GeneralKnowledgeAgent
   - ä¸Šè¨˜ã«è©²å½“ã—ãªã„ä¸€èˆ¬çš„ãªè³ªå•

## ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### æ¨™æº–ã‚¯ã‚¨ãƒªãƒ•ãƒ­ãƒ¼

```
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¯ã‚¨ãƒªå—ä¿¡
2. LanguageClassifier ã§è¨€èªæ¤œå‡º
3. RouterAgent ã§ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°åˆ¤å®š
4. å°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§å‡¦ç†
5. MemoryAgent ã§ä¼šè©±ä¿å­˜
6. ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆ
7. VoiceAgent ã§TTSå¤‰æ›ï¼ˆéŸ³å£°ãƒ¢ãƒ¼ãƒ‰æ™‚ï¼‰
8. CharacterControlAgent ã§è¡¨æƒ…åˆ¶å¾¡
```

### ãƒ¡ãƒ¢ãƒªçµ±åˆãƒ•ãƒ­ãƒ¼

```
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼: "ã•ã£ãä½•ã‚’èã„ãŸï¼Ÿ"
2. RouterAgent: ãƒ¡ãƒ¢ãƒªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œå‡º
3. MemoryAgent: ç›´è¿‘3åˆ†ã®ä¼šè©±å±¥æ­´å–å¾—
4. ãƒ¬ã‚¹ãƒãƒ³ã‚¹: "å…ˆã»ã©å–¶æ¥­æ™‚é–“ã«ã¤ã„ã¦è³ªå•ã•ã‚Œã¾ã—ãŸ"
```

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### Frontend (Mastra)

- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Mastra 0.10.5
- **è¨€èª**: TypeScript
- **çŠ¶æ…‹ç®¡ç†**: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå†…ãƒ¡ãƒ¢ãƒª
- **å®Ÿè£…å ´æ‰€**: `/frontend/src/mastra/agents/`

### Backend (LangGraph)

- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: LangGraph
- **è¨€èª**: Python 3.11+
- **LLM**: OpenRouterçµŒç”±ï¼ˆGemini, GPT-4, Claudeï¼‰
- **å®Ÿè£…å ´æ‰€**: `/backend/agents/`

## ç§»è¡ŒçŠ¶æ³

| ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ | Mastra | LangGraph | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|-------------|--------|-----------|----------|
| RouterAgent | âœ… | ğŸ”„ | ç§»è¡Œä¸­ |
| BusinessInfoAgent | âœ… | âŒ | æœªç€æ‰‹ |
| FacilityAgent | âœ… | âŒ | æœªç€æ‰‹ |
| EventAgent | âœ… | âŒ | æœªç€æ‰‹ |
| MemoryAgent | âœ… | âŒ | æœªç€æ‰‹ |
| ClarificationAgent | âœ… | âŒ | æœªç€æ‰‹ |
| LanguageClassifier | âœ… | âŒ | æœªç€æ‰‹ |
| GeneralKnowledgeAgent | âœ… | âŒ | æœªç€æ‰‹ |
| CharacterControlAgent | âœ… | âŒ | æœªç€æ‰‹ |
| VoiceAgent | âœ… | âŒ | æœªç€æ‰‹ |
| SlideAgent | âœ… | âŒ | æœªç€æ‰‹ |
| OCRAgent | âŒ | ğŸ“ | æ–°è¦è¨­è¨ˆä¸­ |

å‡¡ä¾‹: âœ…å®Œäº†, ğŸ”„é€²è¡Œä¸­, âŒæœªç€æ‰‹, ğŸ“è¨­è¨ˆä¸­

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [RouterAgent SPEC](../../migration/agents/router-agent/SPEC.md)
- [RouterAgent Migration Guide](../../migration/agents/router-agent/MIGRATION-GUIDE.md)
- [ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ](../../migration/agents/AGENT-TEMPLATE.md)

### å®Ÿè£…ã‚¬ã‚¤ãƒ‰

- [OpenRouterè¨­å®š](../api-management/openrouter-setup.md)
- [ãƒ­ãƒ¼ã‚«ãƒ«ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—](../development/local-setup.md)

### å¤–éƒ¨ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

- [Mastra Documentation](https://mastra.ai/docs)
- [LangGraph Documentation](https://langchain-ai.github.io/langgraph/)
- [OpenRouter Models](https://openrouter.ai/docs#models)
